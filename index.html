<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>VD_FINAL_Sentimientos</title>
	<meta name="description" content="Trabajo practico Final">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./Styles/style.css">


	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
	<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.2/iframeResizer.contentWindow.js"></script>
	<script src="./Scripts/scrollama.min.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<script src="./Scripts/app.js"></script>
	
</head>
<body>

	<body>

	  <main>
		<nav>
		  <a href="https://github.com/osaintnom/VD_FINAL_Sentimientos" style="color: rgb(65, 198, 228);">Sentimientos</a>
		  <div class="nav__examples">
			<p>De Diego, Del Toro y Saint-Nom</p>
		  </div>
		</nav>
		<section id="intro" style="max-width: 55rem;">
		  <h1 class="intro__hed">La emoción musical y sus aspectos</h1>
		  <!-- <p class = "subtitulo"> en este trabajo ... <p> -->
		  <p class="intro__dek" style="margin-top: 100px; margin-bottom: -150px;">
			<span class="is-visible"></span>En este artículo, se lleva a cabo un estudio detallado sobre la valencia de las canciones disponibles en la plataforma de música en streaming Spotify. La valencia es una medida que refleja la positividad o negatividad emocional de una canción. 
			<span class='place'></span>El análisis se divide en tres categorías principales de valencia: baja valencia (0 a 0.33), valencia moderada (0.33 a 0.66) y alta valencia (0.66 a 1). Cada categoría representa un espectro emocional distinto y nos permite examinar las particularidades musicales que definen cada rango.
		  </p>
		</section>
		<section id="scrolly">
		  <article>
			<div class="step" data-step="1">
			  <p style="padding-top: 300px;"> 0 ≤ Valencia ≤ 0,33 (Triste)</p>
			  <div id = "parrafo"><p>texto explicando</p></div>
			</div>
			<div class="step" data-step="2">
			  <p style="padding-top: 300px;"> Tempo (triste)</p>
			  <div id = "parrafo"><p>texto explicando</p></div>
			</div>
			<div class="step" data-step="3">
			  <p style="padding-top: 300px;"> 0,66 < Valencia ≤ 1 (Felíz)</p>
			  <div id = "parrafo"><p>texto explicando</p></div>
			</div>
			<div class="step" data-step="4">
				<p style="padding-top: 300px;"> 0 ≤ Valencia ≤ 0,33 (Triste)</p>
				<div id = "parrafo"><p>texto explicando</p></div>
			  </div>
			  <div class="step" data-step="5">
				<p style="padding-top: 300px;"> 0,33 < Valencia ≤ 0,66 (Neutral)</p>
				<div id = "parrafo"><p>texto explicando</p></div>
			  </div>
			  <div class="step" data-step="6">
				<p style="padding-top: 300px;"> 0,66 < Valencia ≤ 1 (Felíz)</p>
				<div id = "parrafo"><p>texto explicando</p></div>
			  </div>
		  </article>
		  <figure id="zoomChartContainer">
			<sections id="zoomChart1">
			  <div id="zoom"class="hidden"></div>
			  <h2>Valencia</h2>
			  <img src=./img/valencia.jpeg style="width:100%;height:100%;position:center"></img>
			</sections>
			<!-- <sections id="zoomChart1">
				<div id="zoom" class="hidden" ></div>
				<h2>Mode</h2>
				<img src=./img/mode.jpeg style="width:100%;height:100%;position:center"></img>
			  </sections>
			  <sections id="zoomChart1">
				<div id="zoom"class="hidden"></div>
				<h2>Tempo</h2>
				<img src=./img/tempo.jpeg style="width:100%;height:100%;position:center"></img>
			  </sections>
			  <sections id="zoomChart1">
				<div id="zoom"class="hidden"></div>
				<h2>Loudness</h2>
				<img src=./img/loudness.jpeg style="width:100%;height:100%;position:center"></img>
			  </sections>
			  <sections id="zoomChart1">
				<div id="zoom"class="hidden"></div>
				<h2>Songs</h2>
				<img src=./img/songs.jpeg style="width:100%;height:100%;position:center"></img>
			  </sections> -->
		  </figure>
		</section>
		<div class="subody">
		  
		</div>
	  
		<section id="outro"><section id="explicacion">
			<p class="parrafo">parrafo explicando</p>
			<div class="radarChart"></div>

			<script src="./Scripts/Radarchartv2/script.js"></script>	
			<script>
				RadarChart(".radarChart", data1, radarChartOptions);
			</script>
		  </section>
		</section>
	  
	  <script>
	
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {
			console.log(response);
			// response = { element, direction, index }

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			const observer=new InteractionObserver((entries) =>{
				entries.foreach((entry) =>{
					console.log(entry)
					if (entry.isIntersecting){
						entry.target.classList.add('show');
					}else{
						EventSource.target,classList.remove('show');
					}
				} );
			});
			const hiddenElements = document.querySelectorAll('hiden');
			hiddenElements.forEach((el) => observer.addEventListener(el));
		}

		function init() {

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();

	  </script>
  
	</main>
  </body>
  </html>